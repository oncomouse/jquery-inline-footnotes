/*! jquery-inline-footnotes v1.0.2 (also contains jquery-overlaps v 1.2.3) |  04-12-2014 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(b,e){var f=c(b),g=e?c(e):f,h=[],i=0,j=0,k=f.length,l=e?g.length:f.length;for(e||(e=b);k>i;i++)for(j=0;l>j;j++)b[i]!==e[j]&&d(f[i],g[j])&&h.push(k>l?b[i]:e[j]);return a.unique(h)}function c(b){for(var c,d,e=[],f=0;d=b[f++];)c=a(d).offset(),e.push([c.top,c.left,d.offsetWidth,d.offsetHeight]);return e}function d(a,b){var c=a[1],d=a[0],e=a[2],f=a[3],g=b[1],h=b[0],i=b[2],j=b[3];return!(d>=h+j||h>=d+f||c>=g+i||g>=c+e)}a.fn.overlaps=function(c){return this.pushStack(b(this,c&&a(c)))}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){a.inlineFootnotes=function(b){var c=a.extend({},a.inlineFootnotes.defaults,b),d=a.inlineFootnotes.attachNewStylesheet();return a("*[data-inlined=true]").length>0?!0:(a('sup[id^="'+c.footNoteRefID+'"]').each(function(b){var d=a(this);d.parent().css("position","relative");var e=d.attr("id").replace(c.footNoteRefID,""),f=b+1,g=a('*[id="'+c.footNoteID+e+'"]'),h=a('<span class="inline-footnote closed" id="'+c.inlineFootNoteID+e+'">'+g.html()+"</span>");g.parent().hide(),g.parent().attr("data-inlined",!0),h.find("p:first-child").html("<sup>"+f+"</sup>"+h.find("p:first-child").html()),d.after(h);var i=d.find("a");i.attr("href","#"),i.click(function(b){b.preventDefault();a(this).parent().attr("id").replace(c.footNoteRefID,"");return a("#"+c.inlineFootNoteID+e).toggleClass("closed opened"),!1})}),void a(window).resize(function(){var b=a(window).width()<=c.columnWidth;if(null!==c.mediaQuery&&(b=!window.matchMedia(c.mediaQuery).matches),b)a('sup[id^="'+c.footNoteRefID+'"]').each(function(){var b=a(this),e=b.attr("id").replace(c.footNoteRefID,"");a.inlineFootnotes.addCSSRule(d,"#"+c.inlineFootNoteID+e+":before, #"+c.inlineFootNoteID+e+":after","left: "+(b.offset().left-b.parent().offset().left)+"px !important;",-1)});else for(var e=a('*[id^="'+c.inlineFootNoteID+'"]'),f=e.map(function(){return a(this).attr("id").replace(c.inlineFootNoteID,"")}),g=e.overlaps(),h=0;g.length>0&&h<c.maxCollisionCycles;){c.DEBUG&&console.log("running collision detection");var i=[];g.each(function(){var b=a(this),d=b.attr("id").replace(c.inlineFootNoteID,""),g=a.inArray(f,d)+1,h=e.filter(function(a){return parseInt(a)!==parseInt(g-1)});h.each(function(){var e=a(this),g=e.attr("id").replace(c.inlineFootNoteID,"");if(b.overlaps("#"+e.attr("id")).length>0){var h=[d,g].sort(function(b,c){return a.inArray(f,b)-a.inArray(f,c)}),j=i.filter(function(a){return a[0]===h[0]&&a[1]===h[1]||a[1]===h[0]&&a[0]===h[1]});0===j.length&&i.push(h)}})}),a(i).each(function(){var b=a("#"+c.inlineFootNoteID+this[0]),d=a("#"+c.inlineFootNoteID+this[1]),e=b.offset().top+b.height()-d.offset().top;d.offset({top:d.offset().top+e+c.overlapOffset})}),g=e.overlaps(),h++}}).resize())},a.inlineFootnotes.attachNewStylesheet=function(){var a=document.createElement("style");return a.appendChild(document.createTextNode("")),document.head.appendChild(a),a.sheet},a.inlineFootnotes.addCSSRule=function(a,b,c,d){0>d&&(d=a.rules.length),"insertRule"in a?a.insertRule(b+"{"+c+"}",d):"addRule"in a&&a.addRule(b,c,d)},a.inlineFootnotes.defaults={columnWidth:1155,mediaQuery:null,overlapOffset:5,footNoteID:"fn:",footNoteRefID:"fnref:",inlineFootNoteID:"fnote_",maxCollisionCycles:8,DEBUG:!1}});