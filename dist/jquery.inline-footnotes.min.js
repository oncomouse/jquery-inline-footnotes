/*! 
 * jquery-inline-footnotes v1.0.21
 *  
 * Copyright 2015 Andrew Pilsch <apilsch@tamu.edu> (http://andrew.pilsch.com)
 * 
 *   (also contains jquery-overlaps v 1.2.3, Copyright (c) 2010 Brandon Aaron (http://brandonaaron.net))
 * 
 * Built On: 11-05-2016
 *
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(b,e){var f=c(b),g=e?c(e):f,h=[],i=0,j=0,k=f.length,l=e?g.length:f.length;for(e||(e=b);k>i;i++)for(j=0;l>j;j++)b[i]!==e[j]&&d(f[i],g[j])&&h.push(k>l?b[i]:e[j]);return a.unique(h)}function c(b){for(var c,d,e=[],f=0;d=b[f++];)c=a(d).offset(),e.push([c.top,c.left,d.offsetWidth,d.offsetHeight]);return e}function d(a,b){var c=a[1],d=a[0],e=a[2],f=a[3],g=b[1],h=b[0],i=b[2],j=b[3];return!(d>=h+j||h>=d+f||c>=g+i||g>=c+e)}a.fn.overlaps=function(c){return this.pushStack(b(this,c&&a(c)))}}),function(a,b){"function"==typeof define&&define.amd?define(["jQuery"],function(c){return a.returnExportsGlobal=b(c)}):"object"==typeof exports?module.exports=b(require("jquery")):a.returnExportsGlobal=b(a.jQuery)}(this,function(a){return a.inlineFootnotes=function(b){var c=a.extend({},a.inlineFootnotes.defaults,b),d=function(){var b=a(window).width()<=c.columnWidth;return null!==c.mediaQuery&&(b=!window.matchMedia(c.mediaQuery).matches),b},e=function(a,b,c,d){0>d&&(d="undefined"!=typeof a.rules?a.rules.length:a.cssRules.length),"insertRule"in a?a.insertRule(b+"{"+c+"}",d):"addRule"in a&&a.addRule(b,c,d)};return attachNewStylesheet=function(){var a=document.createElement("style");return a.appendChild(document.createTextNode("")),document.head.appendChild(a),a.sheet},$stylesheet=attachNewStylesheet(),a("*[data-inlined=true]").length>0?!0:(a('sup[id^="'+c.footNoteRefID+'"]').each(function(b){var e=a(this);e.parent().css("position","relative");var f=e.attr("id").replace(c.footNoteRefID,""),g=b+1,h=a('*[id="'+c.footNoteID+f+'"]'),i=a('<span class="inline-footnote closed" id="'+c.inlineFootNoteID+f+'">'+h.html()+"</span>");if(h.parent().hide(),h.parent().attr("data-inlined",!0),i.find("p:first-child").html("<sup>"+g+"</sup>"+i.find("p:first-child").html()),e.after(i),"block"!==i.parent().css("display")){for(root=i.parent();"block"!==root.parent().css("display");)root=root.parent();root.after(i.clone().css("top",e.offset().top-root.offset().top).addClass("cloned")),i.addClass("hidden").attr("id",i.attr("id")+"_original"),e.find("a").attr("data-target",i.attr("id"))}var j=e.find("a");j.attr("href","#"),j.click(function(b){b.preventDefault(),d()&&(a("undefined"==typeof a(this).attr("data-target")?"#"+c.inlineFootNoteID+f:"#"+a(this).attr("data-target")).toggleClass("closed opened"),a(window).resize())})}),void a(window).resize(function(){if(d())a("html").addClass("footnote-inline").removeClass("footnote-sidebar"),a('sup[id^="'+c.footNoteRefID+'"]').each(function(){var b=a(this),d=b.attr("id").replace(c.footNoteRefID,"");e($stylesheet,"#"+c.inlineFootNoteID+d+":before, #"+c.inlineFootNoteID+d+":after","left: "+(b.offset().left-b.parent().offset().left)+"px !important;",-1)});else{a("html").removeClass("footnote-inline").addClass("footnote-sidebar");for(var b=a('*[id^="'+c.inlineFootNoteID+'"]'),f=b.map(function(){return a(this).attr("id").replace(c.inlineFootNoteID,"")}),g=a('*[id^="'+c.inlineFootNoteID+'"]').overlaps(),h=0;g.length>0&&h<c.maxCollisionCycles;){c.DEBUG&&console.log("running collision detection");var i=[];g.each(function(d){var e=a(this),g=e.attr("id").replace(c.inlineFootNoteID,""),h=a.inArray(f,g)+1,j=b.filter(function(a){return parseInt(a)!==parseInt(h-1)});j.each(function(){var b=a(this),d=b.attr("id").replace(c.inlineFootNoteID,"");if(e.overlaps("#"+b.attr("id")).length>0){var h=[g,d].sort(function(b,c){return a.inArray(f,b)-a.inArray(f,c)}),j=i.filter(function(a){return a[0]===h[0]&&a[1]===h[1]||a[1]===h[0]&&a[0]===h[1]});0===j.length&&i.push(h)}})}),a(i).each(function(){var b=a("#"+c.inlineFootNoteID+this[0]),d=a("#"+c.inlineFootNoteID+this[1]),e=b.offset().top+b.height()-d.offset().top;d.offset({top:d.offset().top+e+c.overlapOffset})}),g=a('*[id^="'+c.inlineFootNoteID+'"]').overlaps(),h++}}}.bind(this)).resize())},a.inlineFootnotes.defaults={columnWidth:1155,mediaQuery:null,overlapOffset:5,footNoteID:"fn:",footNoteRefID:"fnref:",inlineFootNoteID:"fnote_",maxCollisionCycles:8,DEBUG:!1},a.inlineFootnotes});