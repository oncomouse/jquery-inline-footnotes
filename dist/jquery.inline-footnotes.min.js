/*! jquery-inline-footnotes v1.0.8 (also contains jquery-overlaps v 1.2.3) |	05-05-2016 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):"undefined"!=typeof module&&module.exports?module.exports=b(require("jquery")):a.returnExports=b(a.jQuery)}(window,function(a){return a.inlineFootnotes=function(b){var c=a.extend({},a.inlineFootnotes.defaults,b),d=function(){var b=a(window).width()<=c.columnWidth;return null!==c.mediaQuery&&(b=!window.matchMedia(c.mediaQuery).matches),b},e=function(a,b,c,d){0>d&&(d="undefined"!=typeof a.rules?a.rules.length:a.cssRules.length),"insertRule"in a?a.insertRule(b+"{"+c+"}",d):"addRule"in a&&a.addRule(b,c,d)};return attachNewStylesheet=function(){var a=document.createElement("style");return a.appendChild(document.createTextNode("")),document.head.appendChild(a),a.sheet},$stylesheet=attachNewStylesheet(),a("*[data-inlined=true]").length>0?!0:(a('sup[id^="'+c.footNoteRefID+'"]').each(function(b){var e=a(this);e.parent().css("position","relative");var f=e.attr("id").replace(c.footNoteRefID,""),g=b+1,h=a('*[id="'+c.footNoteID+f+'"]'),i=a('<span class="inline-footnote closed" id="'+c.inlineFootNoteID+f+'">'+h.html()+"</span>");if(h.parent().hide(),h.parent().attr("data-inlined",!0),i.find("p:first-child").html("<sup>"+g+"</sup>"+i.find("p:first-child").html()),e.after(i),"block"!==i.parent().css("display")){for(root=i.parent();"block"!==root.parent().css("display");)root=root.parent();root.after(i.clone().css("top",e.offset().top-root.offset().top).addClass("cloned")),i.addClass("hidden").attr("id",i.attr("id")+"_original")}var j=e.find("a");j.attr("href","#"),j.click(function(b){b.preventDefault();a(this).parent().attr("id").replace(c.footNoteRefID,"");return d()&&(a("#"+c.inlineFootNoteID+f).toggleClass("closed opened"),a(window).resize()),!1})}),void a(window).resize(function(){if(d())a('sup[id^="'+c.footNoteRefID+'"]').each(function(){var b=a(this),d=b.attr("id").replace(c.footNoteRefID,"");e($stylesheet,"#"+c.inlineFootNoteID+d+":before, #"+c.inlineFootNoteID+d+":after","left: "+(b.offset().left-b.parent().offset().left)+"px !important;",-1)});else for(var b=a('*[id^="'+c.inlineFootNoteID+'"]'),f=b.map(function(){return a(this).attr("id").replace(c.inlineFootNoteID,"")}),g=a('*[id^="'+c.inlineFootNoteID+'"]').overlaps(),h=0;g.length>0&&h<c.maxCollisionCycles;){c.DEBUG&&console.log("running collision detection");var i=[];g.each(function(d){var e=a(this),g=e.attr("id").replace(c.inlineFootNoteID,""),h=a.inArray(f,g)+1,j=b.filter(function(a){return parseInt(a)!==parseInt(h-1)});j.each(function(){var b=a(this),d=b.attr("id").replace(c.inlineFootNoteID,"");if(e.overlaps("#"+b.attr("id")).length>0){var h=[g,d].sort(function(b,c){return a.inArray(f,b)-a.inArray(f,c)}),j=i.filter(function(a){return a[0]===h[0]&&a[1]===h[1]||a[1]===h[0]&&a[0]===h[1]});0===j.length&&i.push(h)}})}),a(i).each(function(){var b=a("#"+c.inlineFootNoteID+this[0]),d=a("#"+c.inlineFootNoteID+this[1]),e=b.offset().top+b.height()-d.offset().top;d.offset({top:d.offset().top+e+c.overlapOffset})}),g=a('*[id^="'+c.inlineFootNoteID+'"]').overlaps(),h++}}.bind(this)).resize())},a.inlineFootnotes.defaults={columnWidth:1155,mediaQuery:null,overlapOffset:5,footNoteID:"fn:",footNoteRefID:"fnref:",inlineFootNoteID:"fnote_",maxCollisionCycles:8,DEBUG:!1},a.inlineFootnotes});